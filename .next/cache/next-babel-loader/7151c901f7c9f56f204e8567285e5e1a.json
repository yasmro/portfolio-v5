{"ast":null,"code":"// set client\nconsole.log(process.env);\n\nconst client = require('contentful').createClient({\n  space: process.env.REACT_APP_NEXT_PUBLIC_CONTENTFUL_SPACE_ID,\n  accessToken: process.env.REACT_APP_NEXT_PUBLIC_CONTENTFUL_ACCESS_TOKEN\n}); // get all posts\n\n\nexport async function getAllPosts() {\n  const entries = await client.getEntries({}); // content_type: \"post\",\n  // order: \"-fields.date\",\n\n  if (entries.items) {\n    return entries.items;\n  }\n\n  console.log(`Error getting Entries for ${contentType.name}.`);\n} // get a post by slug\n\nexport async function getPostBySlug(slug) {\n  const entries = await client.getEntries({\n    content_type: \"post\",\n    limit: 1,\n    \"fields.slug[in]\": slug\n  });\n\n  if (entries.items) {\n    return entries.items[0];\n  }\n\n  console.log(`Error getting Entries for ${contentType.name}.`);\n} // get more 3 latest posts\n\nexport async function getMorePosts(slug) {\n  const entries = await client.getEntries({\n    content_type: \"post\",\n    limit: 3,\n    order: \"-fields.date\",\n    \"fields.slug[nin]\": slug\n  });\n\n  if (entries.items) {\n    return entries.items;\n  }\n\n  console.log(`Error getting Entries for ${contentType.name}.`);\n}\n\nfunction parsePostSlug({\n  fields\n}) {\n  return {\n    slug: fields.slug\n  };\n}\n\nfunction parsePostSlugEntries(entries, cb = parsePostSlug) {\n  var _entries$items;\n\n  return entries === null || entries === void 0 ? void 0 : (_entries$items = entries.items) === null || _entries$items === void 0 ? void 0 : _entries$items.map(cb);\n} // get all slugs of posts\n\n\nexport async function getAllPostsWithSlug() {\n  const entries = await client.getEntries({\n    content_type: \"post\",\n    select: \"fields.slug\"\n  });\n  return parsePostSlugEntries(entries, post => post.fields);\n}","map":{"version":3,"sources":["/Users/YuOhno/portfoliov5/lib/index.js"],"names":["console","log","process","env","client","require","createClient","space","REACT_APP_NEXT_PUBLIC_CONTENTFUL_SPACE_ID","accessToken","REACT_APP_NEXT_PUBLIC_CONTENTFUL_ACCESS_TOKEN","getAllPosts","entries","getEntries","items","contentType","name","getPostBySlug","slug","content_type","limit","getMorePosts","order","parsePostSlug","fields","parsePostSlugEntries","cb","map","getAllPostsWithSlug","select","post"],"mappings":"AAAA;AACAA,OAAO,CAACC,GAAR,CAAYC,OAAO,CAACC,GAApB;;AACA,MAAMC,MAAM,GAAGC,OAAO,CAAC,YAAD,CAAP,CAAsBC,YAAtB,CAAmC;AAChDC,EAAAA,KAAK,EAAEL,OAAO,CAACC,GAAR,CAAYK,yCAD6B;AAEhDC,EAAAA,WAAW,EAAEP,OAAO,CAACC,GAAR,CAAYO;AAFuB,CAAnC,CAAf,C,CAKA;;;AACA,OAAO,eAAeC,WAAf,GAA6B;AAClC,QAAMC,OAAO,GAAG,MAAMR,MAAM,CAACS,UAAP,CAAkB,EAAlB,CAAtB,CADkC,CAI9B;AACF;;AACF,MAAID,OAAO,CAACE,KAAZ,EAAmB;AACjB,WAAOF,OAAO,CAACE,KAAf;AACD;;AACDd,EAAAA,OAAO,CAACC,GAAR,CAAa,6BAA4Bc,WAAW,CAACC,IAAK,GAA1D;AACD,C,CAED;;AACA,OAAO,eAAeC,aAAf,CAA6BC,IAA7B,EAAmC;AACxC,QAAMN,OAAO,GAAG,MAAMR,MAAM,CAACS,UAAP,CAAkB;AACtCM,IAAAA,YAAY,EAAE,MADwB;AAEtCC,IAAAA,KAAK,EAAE,CAF+B;AAGtC,uBAAmBF;AAHmB,GAAlB,CAAtB;;AAKA,MAAIN,OAAO,CAACE,KAAZ,EAAmB;AACjB,WAAOF,OAAO,CAACE,KAAR,CAAc,CAAd,CAAP;AACD;;AACDd,EAAAA,OAAO,CAACC,GAAR,CAAa,6BAA4Bc,WAAW,CAACC,IAAK,GAA1D;AACD,C,CAED;;AACA,OAAO,eAAeK,YAAf,CAA4BH,IAA5B,EAAkC;AACvC,QAAMN,OAAO,GAAG,MAAMR,MAAM,CAACS,UAAP,CAAkB;AACtCM,IAAAA,YAAY,EAAE,MADwB;AAEtCC,IAAAA,KAAK,EAAE,CAF+B;AAGtCE,IAAAA,KAAK,EAAE,cAH+B;AAItC,wBAAoBJ;AAJkB,GAAlB,CAAtB;;AAOA,MAAIN,OAAO,CAACE,KAAZ,EAAmB;AACjB,WAAOF,OAAO,CAACE,KAAf;AACD;;AACDd,EAAAA,OAAO,CAACC,GAAR,CAAa,6BAA4Bc,WAAW,CAACC,IAAK,GAA1D;AACD;;AAED,SAASO,aAAT,CAAuB;AAAEC,EAAAA;AAAF,CAAvB,EAAmC;AACjC,SAAO;AACLN,IAAAA,IAAI,EAAEM,MAAM,CAACN;AADR,GAAP;AAGD;;AAED,SAASO,oBAAT,CAA8Bb,OAA9B,EAAuCc,EAAE,GAAGH,aAA5C,EAA2D;AAAA;;AACzD,SAAOX,OAAP,aAAOA,OAAP,yCAAOA,OAAO,CAAEE,KAAhB,mDAAO,eAAgBa,GAAhB,CAAoBD,EAApB,CAAP;AACD,C,CAED;;;AACA,OAAO,eAAeE,mBAAf,GAAqC;AAC1C,QAAMhB,OAAO,GAAG,MAAMR,MAAM,CAACS,UAAP,CAAkB;AACtCM,IAAAA,YAAY,EAAE,MADwB;AAEtCU,IAAAA,MAAM,EAAE;AAF8B,GAAlB,CAAtB;AAIA,SAAOJ,oBAAoB,CAACb,OAAD,EAAWkB,IAAD,IAAUA,IAAI,CAACN,MAAzB,CAA3B;AACD","sourcesContent":["// set client\nconsole.log(process.env)\nconst client = require('contentful').createClient({\n  space: process.env.REACT_APP_NEXT_PUBLIC_CONTENTFUL_SPACE_ID,\n  accessToken: process.env.REACT_APP_NEXT_PUBLIC_CONTENTFUL_ACCESS_TOKEN,\n});\n\n// get all posts\nexport async function getAllPosts() {\n  const entries = await client.getEntries({\n\n  });\n      // content_type: \"post\",\n    // order: \"-fields.date\",\n  if (entries.items) {\n    return entries.items;\n  }\n  console.log(`Error getting Entries for ${contentType.name}.`);\n}\n\n// get a post by slug\nexport async function getPostBySlug(slug) {\n  const entries = await client.getEntries({\n    content_type: \"post\",\n    limit: 1,\n    \"fields.slug[in]\": slug,\n  });\n  if (entries.items) {\n    return entries.items[0];\n  }\n  console.log(`Error getting Entries for ${contentType.name}.`);\n}\n\n// get more 3 latest posts\nexport async function getMorePosts(slug) {\n  const entries = await client.getEntries({\n    content_type: \"post\",\n    limit: 3,\n    order: \"-fields.date\",\n    \"fields.slug[nin]\": slug,\n  });\n\n  if (entries.items) {\n    return entries.items;\n  }\n  console.log(`Error getting Entries for ${contentType.name}.`);\n}\n\nfunction parsePostSlug({ fields }) {\n  return {\n    slug: fields.slug,\n  };\n}\n\nfunction parsePostSlugEntries(entries, cb = parsePostSlug) {\n  return entries?.items?.map(cb);\n}\n\n// get all slugs of posts\nexport async function getAllPostsWithSlug() {\n  const entries = await client.getEntries({\n    content_type: \"post\",\n    select: \"fields.slug\",\n  });\n  return parsePostSlugEntries(entries, (post) => post.fields);\n}\n"]},"metadata":{},"sourceType":"module"}